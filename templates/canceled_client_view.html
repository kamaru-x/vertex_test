{% extends 'base.html' %}
{% load static %}
{% block content %}
    <body class="py-5">
        {% include 'header.html' %}
      
     <!-- BEGIN: Content -->
    <div class="content">
            <div class="flex items-center mt-8"></div>

    <!-- BEGIN: Wizard Layout -->
     <div class="intro-y box py-10 sm:py-20 mt-5">
        <div class="relative before:hidden before:lg:block before:absolute before:w-[69%] before:h-[3px] before:top-0 before:bottom-0 before:mt-4 before:bg-slate-100 before:dark:bg-darkmode-400 flex flex-col lg:flex-row justify-center px-5 sm:px-20">
            <div class="intro-x lg:text-center flex items-center lg:block flex-1 z-10">
                <button class="w-10 h-10 rounded-full btn btn-primary">1</button>
                <div class="lg:w-32 font-medium text-base lg:mt-3 ml-3 lg:mx-auto">Lead Generated</div>
            </div>
            <div class="intro-x lg:text-center flex items-center mt-5 lg:mt-0 lg:block flex-1 z-10">
                <button class="w-10 h-10 rounded-full btn btn-primary">2</button>
                <div class="lg:w-32 font-medium text-base lg:mt-3 ml-3 lg:mx-auto">Converted to Opportunity</div>
            </div>
            <div class="intro-x lg:text-center flex items-center mt-5 lg:mt-0 lg:block flex-1 z-10">
                <button class="w-10 h-10 rounded-full btn btn-primary">3</button>
                <div class="lg:w-32 font-medium text-base lg:mt-3 ml-3 lg:mx-auto">Created Proposal / Client</div>
            </div>
            <div class="intro-x lg:text-center flex items-center mt-5 lg:mt-0 lg:block flex-1 z-10">
                <button class="w-10 h-10 rounded-full btn text-slate-500 bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400">4</button>
                <div class="lg:w-32 text-base lg:mt-3 ml-3 lg:mx-auto text-slate-600 dark:text-slate-400">Proposal Acceptance</div>
            </div>
            <div class="intro-x lg:text-center flex items-center mt-5 lg:mt-0 lg:block flex-1 z-10">
                <button class="w-10 h-10 rounded-full btn text-slate-500 bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400">5</button>
                <div class="lg:w-32 text-base lg:mt-3 ml-3 lg:mx-auto text-slate-600 dark:text-slate-400">Project</div>
            </div>

        </div>
        <br><br><hr>
<!--  -->
<style>
    .head{
    font-weight: 500;
    color: #455dbe;
    }
</style>
<!-- BEGIN: General Report -->
                        <div class="col-span-12 xl:col-span-9 mt-8">
                            
                            <div class="report-box-2 intro-y mt-5">
                                <div class="box grid grid-cols-12">
                                    <div class="col-span-12 lg:col-span-4 px-8 py-12 flex flex-col justify-center" style="    background: #d4e1ff;">
                                        <i data-lucide="pie-chart" class="w-10 h-10 text-pending"></i> 
                                        <div class="justify-start flex items-center text-slate-600 dark:text-slate-300"> </div>
                                        <div class="flex items-center justify-start mt-4">
                                            <div class="relative text-2xl font-medium ml-0.5"> <span class="absolute text-xl font-medium top-0 left-0 -ml-0.5"></span>{{ lead.Company }}<br> {{ lead.Phone }} / {{ lead.Email }}</div>
                                            <a class="text-slate-500 ml-4" href=""></a>
                                        </div>
                                    </div>
                                    <div class="col-span-12 lg:col-span-8 p-8 border-t lg:border-t-0 lg:border-l border-slate-200 dark:border-darkmode-300 border-dashed">
                                      
                                        <div class="tab-content px-5 pb-5">
                                            <div class="tab-pane active grid grid-cols-12 gap-y-8 gap-x-10" id="weekly-report" role="tabpanel" aria-labelledby="weekly-report-tab">
                                                <div class="col-span-6 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Reference No</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.Reference }}</div>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Salesman</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.Salesman.first_name }}<br>{{ lead.Salesman.Mobile }}<br>{{ lead.Salesman.email }}</div>
                                                    </div>
                                                </div>
                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Client Date</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.To_Client }}</div>
                                                    </div>
                                                </div>
                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Address</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.Address }}</div>
                                                    </div>
                                                </div>
                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Closing Date</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.ECDate | date:"d M Y" }}</div>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Expected Value</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.ESValue }}</div>
                                                    </div>
                                                </div>
                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Primary Contact</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-base">{{ lead.CName }}<br>
                                                            {{ lead.CNumber }}
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Status</div>
                                                    {% if lead.Reject_Date %}
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-white btn-rounded btn-danger px-3 py-1">Rejected on {{ lead.Reject_Date }}</div>
                                                    </div>
                                                    {% else %}
                                                    <div class="mt-1.5 flex items-center">
                                                        <div class="text-warning btn-rounded btn-warning-soft px-3 py-1">Status Pending</div>
                                                    </div>
                                                    {% endif %}
                                                </div> -->

                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Canceled Date</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        {{ lead.Cancel_Date }}
                                                    </div>
                                                </div>

                                                <div class="col-span-12 sm:col-span-6 md:col-span-4">
                                                    <div class="text-slate-500 head">Reason for Cancelation</div>
                                                    <div class="mt-1.5 flex items-center">
                                                        {{ lead.Cancel_Reason }}
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END: General Report -->
                       
<div class="container" style="padding: 40px; padding-top:100px;">
<ul class="nav nav-link-tabs" role="tablist">
    <li id="example-5-tab" class="nav-item flex-1" role="presentation">
        <button class="nav-link w-full py-2 active" data-tw-toggle="pill" data-tw-target="#example-tab-5" type="button" role="tab" aria-controls="example-tab-5" aria-selected="true">
            Products
        </button>
    </li>
    <li id="example-6-tab" class="nav-item flex-1" role="presentation">
        <button class="nav-link w-full py-2" data-tw-toggle="pill" data-tw-target="#example-tab-6" type="button" role="tab" aria-controls="example-tab-6" aria-selected="false">
            Scope of Work
        </button>
    </li>
    <li id="example-7-tab" class="nav-item flex-1" role="presentation">
        <button class="nav-link w-full py-2" data-tw-toggle="pill" data-tw-target="#example-tab-7" type="button" role="tab" aria-controls="example-tab-5" aria-selected="true">
            Payment Terms
        </button>
    </li>
    <li id="example-8-tab" class="nav-item flex-1" role="presentation">
        <button class="nav-link w-full py-2" data-tw-toggle="pill" data-tw-target="#example-tab-8" type="button" role="tab" aria-controls="example-tab-5" aria-selected="true">
            Exclusions
        </button>
    </li>
    <li id="example-9-tab" class="nav-item flex-1" role="presentation">
        <button class="nav-link w-full py-2" data-tw-toggle="pill" data-tw-target="#example-tab-9" type="button" role="tab" aria-controls="example-tab-5" aria-selected="true">
          Terms & Conditions
        </button>
    </li>
    <li id="example-10-tab" class="nav-item flex-1" role="presentation">
        <button class="nav-link w-full py-2" data-tw-toggle="pill" data-tw-target="#example-tab-10" type="button" role="tab" aria-controls="example-tab-5" aria-selected="true">
          Updates
        </button>
    </li>
    
</ul>
<div class="tab-content mt-5">
    <div id="example-tab-5" class="tab-pane leading-relaxed active" role="tabpanel" aria-labelledby="example-5-tab">
        <div class="intro-y box py-10 sm:py-10 mt-5">
    
    <div class="grid grid-cols-12 gap-6 mt-5">
        
        <!-- BEGIN: Data List -->
         <div class="intro-y col-span-12 overflow-auto 2xl:overflow-visible">
            <table class="table table-report -mt-2">
                <thead>
                    <tr>
                       
                        <th class="whitespace-nowrap">SL. NO.</th>
                        <th class="whitespace-nowrap">REF. NO.</th>
                        <th class="text-center whitespace-nowrap">ADDED ON</th>
                        <th class="whitespace-nowrap">SECTION NAME</th>
                        <th class="whitespace-nowrap">PRODUCT TITLE</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for product in proposal.Products.all %}
                        <tr class="intro-x">  
                            <td class="w-40">
                                <a href="" class=" whitespace-nowrap">{{ forloop.counter }}</a>
                            </td>
                            <td class="w-40">
                                <a href="" class="font-medium whitespace-nowrap">{{ product.Reference }}</a>
                                 
                            </td>
                            <td class="text-center">
                                <div class="flex items-center justify-center whitespace-nowrap text-success">
                                     {{ product.Date }}
                                </div>
                            </td>
                            <td class="w-64 text-primary">
                                <div>{{ product.Category.Name }}</div>
                            </td>
                            <td  class="w-64 text-primary">
                             <div class="whitespace-nowrap">{{ product.Name }}</div>
                            </td>  
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    </div>
    </div>
    <!--Scope of Work  -->
    <div id="example-tab-6" class="tab-pane leading-relaxed" role="tabpanel" aria-labelledby="example-6-tab">

         <div class="post__content tab-content">
                    
                    <div id="content" class="tab-pane p-5 active" role="tabpanel" aria-labelledby="content-tab">
                       
                        </div>
                        <div class="border border-slate-200/60 dark:border-darkmode-400 rounded-md p-5 mt-5">
                           
                            <div class="">                                    
                                    <div style="text-align:justify;"><label for="post-form-7" class="form-label" style="font-weight:600;"></label> {{ proposal.Scope }}
                                    </div>

                                <div>
                                </div>
                                
                            </div>

                            <!--  -->
                        </div>
                    </div>

    </div>

    <!-- Payment Terms -->

    <div id="example-tab-7" class="tab-pane leading-relaxed" role="tabpanel" aria-labelledby="example-7-tab">

        <div class="post__content tab-content">
                    
                    <div id="content" class="tab-pane p-5 active" role="tabpanel" aria-labelledby="content-tab">
                       
                        </div>
                        <div class="border border-slate-200/60 dark:border-darkmode-400 rounded-md p-5 mt-5">
                           
                            <div class="">
                                
                                <div>
                                    <div style="text-align:justify;"><label for="post-form-7" class="form-label" style="font-weight:600;"></label>{{ proposal.Payment }}</div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
    </div>

    <!-- Exclusions -->
    <div id="example-tab-8" class="tab-pane leading-relaxed" role="tabpanel" aria-labelledby="example-8-tab">

        <div class="post__content tab-content">
                   
                    <div id="content" class="tab-pane p-5 active" role="tabpanel" aria-labelledby="content-tab">
                        </div>
                        <div class="border border-slate-200/60 dark:border-darkmode-400 rounded-md p-5 mt-5">
                          
                            <div class="">  
                                <div>
                                    <div style="text-align:justify;"><label for="post-form-7" class="form-label" style="font-weight:600;"></label>{{ proposal.Exclusion }}</div>
                                </div> 
                            </div>
                        </div>
                    </div>
    </div>

    <!-- Terms & Conditions-->
    <div id="example-tab-9" class="tab-pane leading-relaxed" role="tabpanel" aria-labelledby="example-9-tab">
        <div class="post__content tab-content">
                    
                    <div id="content" class="tab-pane p-5 active" role="tabpanel" aria-labelledby="content-tab">
                       
                        </div>
                        <div class="border border-slate-200/60 dark:border-darkmode-400 rounded-md p-5 mt-5">
                           
                            <div class="">
                                
                                <div>
                                    <div style="text-align:justify;"><label for="post-form-7" class="form-label" style="font-weight:600;"></label> {{ proposal.Terms_Condition }}</div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
    </div>

   <!--  Updates -->

    <div id="example-tab-10" class="tab-pane leading-relaxed" role="tabpanel" aria-labelledby="example-10-tab">
        <br><br>  
        <div class="post__content tab-content">
                     
                    <div id="content" class="tab-pane p-5 active" role="tabpanel" aria-labelledby="content-tab">
                        
                        </div>
                    {% if lead_update %}
                    {% for update in lead_update %}
                        <div id="content" class="tab-pane p-5 active" role="tabpanel" aria-labelledby="content-tab">
                                <div class="border border-slate-200/60 dark:border-darkmode-400 rounded-md p-5">
                                    <div class="mt-1.5 flex items-center" style="float:right;">
                                        <div class="text-base btn-rounded btn-primary-soft px-3 py-1 mb-2">{{ update.AddedDate | date:"d M Y" }}</div><br>               
                                    </div>
                                    <div class="font-medium flex items-center border-b border-slate-200/60 dark:border-darkmode-400 pb-5"> <i data-lucide="chevron-down" class="w-4 h-4 mr-2"></i> Description   
                                    </div>

                                      

                                    <div class="mt-5">
                                        <div class="editor">
                                            <p>{{ update.Description }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="border border-slate-200/60 dark:border-darkmode-400 rounded-md p-5 mt-5">
                                    <div class="font-medium flex items-center border-b border-slate-200/60 dark:border-darkmode-400 pb-5"> <i data-lucide="chevron-down" class="w-4 h-4 mr-2"></i> Files & Attachments </div>
                                    <div class="mt-5">
                                       
                                        <div class="flex items-center mt-5">
                                            {% for u in update.Attachments.all %}
                                            {% if u.Format == 'image' %}
                                            <a href="{{ u.Attachment.url }}" target="_blank"><div class="w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in mr-5">
                                                <img class="rounded-md" alt="" src="{{ u.Attachment.url }}">
                                                <!-- <div title="Remove this image?" class="tooltip w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-danger right-0 top-0 -mr-2 -mt-2"> <i data-lucide="x" class="w-4 h-4"></i> </div> -->
                                            </div></a>
                                            {% else %}
                                                <div class="file">
                                                    <a href="{{ u.Attachment.url }}" class="">
                                                        <div><img src="{% static 'images/download.png' %}"></div>
                                                    </a>
                                                </div>
            
                                                <div class="ml-4">
                                                    <a class="font-medium" href="">{{ u.Name }}</a> 
                                                    <!-- <div class="text-slate-500 text-xs mt-0.5">40 KB</div> -->
                                                </div><br>
                                            {% endif %}
                                            {% endfor %}
                                    
                                    <!-- <div class="dropdown ml-auto">
                                        <a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"> <i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i> </a>
                                        <div class="dropdown-menu w-40">
                                            <ul class="dropdown-content">
                                                <li>
                                                    <a href="" class="dropdown-item"> <i data-lucide="users" class="w-4 h-4 mr-2"></i> Share File </a>
                                                </li>
                                                <li>
                                                    <a href="" class="dropdown-item"> <i data-lucide="trash" class="w-4 h-4 mr-2"></i> Delete </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div> -->
                                </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                        <div class="intro-y col-span-12 overflow-auto 2xl:overflow-visible">
                            <table class="table table-report -mt-2">
                                <tbody>
                                    <tr class="intro-x width"> 
                                        <td class=" width" style="width:100%;">
                                            <i data-lucide="hard-drive" style="width:60px; height:60px; margin-left: auto; margin-right: auto; display: block; color:blue; color: #1e40af;padding: 10px; border-radius: 50%;
                                                background: #e8e4e4;" class="w-4 h-4 mr-2">  
                                            </i>
                                        <div style="text-align: center;">No data available!</div>
                                        </td>   
                                    </tr>    
                                </tbody>
                            </table>
                        </div>
                        {% endif %}
                    </div>
    </div>
    
  
       
    

<!-- previous meeting -->

 <h2 style=" font-size: 30px; font-weight: 500; text-align: center;
        color: #1e40af; padding-top:100px;">Previous Meetings</h2>
        <br><br>

        {% if previous %}
        <div class="px-5 sm:px-20 mt-10 pt-10 border-t border-slate-200/60 dark:border-darkmode-400">
            <!-- <div class="font-medium text-base">Add / Manage Products</div> -->
                                    <div class="col-span-12">
                
                                        <div class="overflow-x-auto">
                                            <table class="table">
                                                <thead class="table-dark">
                                                    <tr>
                                                        <th class="whitespace-nowrap">Date</th>
                                                        <th class="whitespace-nowrap">Meeting Reference</th>
                                                        <th class="whitespace-nowrap">Description</th>
                                                        <th class="whitespace-nowrap">Mode Of Meeting</th>
                                                        <th class="whitespace-nowrap">Time</th>
                                                        
                                                        <th>Remark</th>
                                                        <th class="whitespace-nowrap">Action</th>
                                                    
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for p in previous %}
                                                    <tr>
                                                        <td>{{ p.AddedDate | date:"d M Y" }}</td>
                                                         <td class="w-60 text-primary">
                                                            MEETING-{{ p.id }}
                                                        </td>
                                                        <td class="w-60">
                                                            {{ p.Description }}
                                                        </td>
                                                        <td>{{ p.Mode }}</td>
                                                        <td class="text-primary">{{ p.From }} - {{ p.To }}</td>
                                                       
                                                        {% if p.Update_Date %}<td>Status updated</td>{% else %}<td>Status not updated</td>{% endif %}

                                                        <td class="table-report__action">
                                                            <div class="flex justify-center items-center">      <a class="flex items-center text-primary whitespace-nowrap mr-5" href="{% url 'p-meeting-d' p.id %}" title="view">
                                                            <i data-lucide="eye" class="w-4 h-4 mr-1"></i> 
                                                            </a>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                
            </div>
        </div>
        {% else %}
        <div class="intro-y col-span-12 overflow-auto 2xl:overflow-visible">
            <table class="table table-report -mt-2">
                <tbody>
                    <tr class="intro-x width"> 
                        <td class=" width" style="width:100%;">
                            <i data-lucide="hard-drive" style="width:60px; height:60px; margin-left: auto; margin-right: auto; display: block; color:blue; color: #1e40af;padding: 10px; border-radius: 50%;
                                background: #e8e4e4;" class="w-4 h-4 mr-2">  
                            </i>
                        <div style="text-align: center;">No data available!</div>
                        </td>   
                    </tr>    
                </tbody>
            </table>
        </div>
        {% endif %}
<!-- /previous meeting -->

 
<!-- upcoming meeting -->
 
 <h2 style=" font-size: 30px; font-weight: 500; text-align: center;
        color: #1e40af; padding-top:100px;">Upcoming Meetings</h2>
       
        {% if upcoming %}
        <div class="px-5 sm:px-20 mt-10 pt-10 border-t border-slate-200/60 dark:border-darkmode-400">
            <!-- <div class="font-medium text-base">Add / Manage Products</div> -->
                                    <div class="col-span-12">
                
                                        <div class="overflow-x-auto">
                                            <table class="table">
                                                <thead class="table-dark">
                                                    <tr>
                                                        <th class="whitespace-nowrap">Date</th>
                                                        <th class="whitespace-nowrap">Meeting Reference</th>
                                                        <th class="whitespace-nowrap">Description</th>
                                                        <th class="whitespace-nowrap">Mode Of Meeting</th>
                                                        <th class="whitespace-nowrap">Time</th>
                                                        <!-- <th class="whitespace-nowrap">Description</th> -->
                                                       
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for u in upcoming %}
                                                    <tr>
                                                        <td>{{ u.AddedDate }}</td>
                                                         <td class="w-60 text-primary">
                                                            MEETING-{{ u.id }}
                                                        </td>
                                                         <td class="w-60">
                                                            {{ u.Description }}
                                                        </td>
                                                        <td>{{ u.Mode }}</td>
                                                        <td class="text-primary">{{ u.From }} - {{ u.To }}</td>
                                                        <!-- <td>{{ u.Description }}</td>    -->
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                
                                    <!--  -->
                                </div>
                            </div>
                            {% else %}
                            <div class="intro-y col-span-12 overflow-auto 2xl:overflow-visible mt-5">
                                <table class="table table-report -mt-2">
                                    <tbody>
                                        <tr class="intro-x width"> 
                                            <td class=" width" style="width:100%;">
                                                <i data-lucide="hard-drive" style="width:60px; height:60px; margin-left: auto; margin-right: auto; display: block; color:blue; color: #1e40af;padding: 10px; border-radius: 50%;
                                                    background: #e8e4e4;" class="w-4 h-4 mr-2">  
                                                </i>
                                            <div style="text-align: center;">No data available!</div>
                                            </td>   
                                        </tr>    
                                    </tbody>
                                </table>
                            </div>
                            {% endif %}
                        </div>

    <!-- END: Wizard Layout -->
    </div>

    <!--  -->



  <!-- END: Content -->
  <style>
    .dark-mode-switcher{
        display: none;
    }
    
</style>
    <!-- BEGIN: Dark Mode Switcher-->
    <div data-url="top-menu-dark-regular-form.html" class="dark-mode-switcher cursor-pointer shadow-md fixed bottom-0 right-0 box border rounded-full w-40 h-12 flex items-center justify-center z-50 mb-10 mr-10">
        <div class="mr-4 text-slate-600 dark:text-slate-200">Dark Mode</div>
        <div class="dark-mode-switcher__toggle border"></div>
    </div>
    <!-- END: Dark Mode Switcher-->
</body>
{% endblock content %}